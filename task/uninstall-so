#! /bin/sh

# shellcheck disable=SC2034
THIS_SCRIPT_DESC="Uninstall grammar's shared object"

THIS_SCRIPT=$(readlink -f "$0")
THIS_SCRIPT_DIR=$(dirname "$THIS_SCRIPT")

# shellcheck source=.common
. "${THIS_SCRIPT_DIR}/.common"

########################################################################

cur_dir=$(pwd)

cd "${PARSER_PROJ_DIR}" || exit 1

deprintf "Working on uninstalling shared object.\n"

deprintf "\n"

deprintf "* Expecting shared object at:\n"
deprintf "    %s\n" "${INSTALLED_SO_PATH}"

if [ -f "${INSTALLED_SO_PATH}" ]; then
  deprintf "* Found it\n"
else
  eprintf "* Didn't find shared object to uninstall\n"
  # XXX
  exit 1;
fi

deprintf "* Removing installed shared object\n"

rm -rf "${INSTALLED_SO_PATH}"

cd "${cur_dir}" || exit 1

deprintf "Done\n"
